datasource db {
    provider = "mysql"
    url      = env("DATABASE_URL")
}

generator client {
    provider = "prisma-client-js"
}

model Topic {
    id    String @id @default(cuid())
    name  String @unique
    users User[]
    blogs Blog[]
}

model User {
    id              String    @id
    blogs           Blog[]
    saved_blog      Blog[]    @relation("SavedBlog")
    reading_history Blog[]    @relation("ReadingHistory")
    topics          Topic[]
    followers       User[]    @relation("UserFollows")
    following       User[]    @relation("UserFollows")
    comments        Comment[]
}

model Comment {
    id      String @id @default(cuid())
    content String
    likes   Int    @default(0)
    user_id String
    user    User   @relation(fields: [user_id], references: [id])
    blog_id String
    blog    Blog   @relation(fields: [blog_id], references: [id])
}

model Blog {
    id          String    @id @default(cuid())
    content     Json
    title       String
    coverImage  String
    likes       Int       @default(0)
    description String
    createdAt   DateTime  @default(now())
    user_id     String
    user        User      @relation(fields: [user_id], references: [id])
    savedBy     User[]    @relation("SavedBlog")
    readedBy    User[]    @relation("ReadingHistory")
    comments    Comment[]
    topics      Topic[]
}
